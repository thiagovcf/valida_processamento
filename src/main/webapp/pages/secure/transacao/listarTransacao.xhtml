<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	template="../templates/templateGeral.xhtml">

	<ui:define name="content">

		<div class="row">
			<div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
				<h1 class="page-title txt-color-blueDark">
					<i class="fa-fw fa fa-user"></i> 
						Listar Transações
				</h1>
			</div>
		</div>
		<h:form id="formListarTransacao" prependId="false">
			<input type="hidden" name="${_csrf.parameterName}" value="${_csrf.token}"/>
			<div class="well">
				<div class="row">
					<fieldset>
						<div class="form-group">
							<div class="row">
								<div class="col-sm-12 col-md-6">
									<label class="control-label">Cliente: <sup>*</sup></label>
									<h:selectOneMenu id="cliente" class="form-control input-sm" value="#{transacaoBean.cliente.id}" style="width: 300px;" required="true" disabled="#{clienteBean.visualizar}">
										<f:selectItem itemValue="0" itemLabel="TODOS"/>
										<f:selectItems value="#{transacaoBean.clientes}" var="cliente" itemValue="#{cliente.id}" itemLabel="#{cliente.nome}"/>
									</h:selectOneMenu>
								</div>
							</div>
						</div>
					</fieldset>
					<fieldset>
						<div class="form-group">
							<div class="row">
								<div class="col-sm-12 col-md-1">
									<label class="control-label" style="color:white">.</label>
									<h:commandButton value="Pesquisar" styleClass="btn btn-primary form-control"  actionListener="#{transacaoBean.pesquisar}" /> 
								</div>
							</div>
						</div>
					</fieldset>
				
					<br/>
				
					<div class="table-responsive">
						<table class="table table-bordered">
							<thead>
								<tr>
									<th class="text-center" >Cliente</th>
									<th class="text-center" >CPF</th>
									<th class="text-center" >Data transação</th>
									<th class="text-center" >Valor</th>
									<th class="text-center" >Ações</th>
								</tr>
							</thead>
							<tbody>
								<ui:repeat value="#{transacaoBean.transacoes}" var="transacao" >
									<tr class="success">
										<td width="40%" >#{transacao.cliente.nome}</td>
										<td width="15%" class="text-center">#{transacao.cliente.cpf}</td>
										<td width="15%" class="text-center">#{transacao.dataTransacao}</td>
										<td width="15%" class="text-center">R$ #{transacao.valor}</td>
										<td width="10%" class="text-center">
		                                   <a href="${request.contextPath}/visualizarVenda/codigoVenda=#{transacao.id}" class="btn btn-sm btn-primary">
	                                   			<span class="fa fa-search"/>
						                   </a>
		                               </td>
									</tr>
								</ui:repeat>
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</h:form>
	</ui:define>
</ui:composition>
